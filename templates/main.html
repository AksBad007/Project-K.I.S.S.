{% extends "editorLayout.html" %}
{% block head %}
<link rel="stylesheet" href="{{url_for('static', filename='css/list.css')}}">
<link rel="stylesheet" href="{{url_for('static', filename='css/accDrop.css')}}">
{% endblock %}

{% block nav %}
<div class="action">
    <div class="profile">
        {% if session['role'] == 'Member': %}
		<img src="{{url_for('static', filename='img/user.webp')}}" alt="user-pic">
		{% elif session['role'] == 'Admin': %}
		<img src="{{url_for('static', filename='img/admin.jpg')}}" alt="admin-pic">
		{% endif %}
    </div>
    <div class="menu">
        <h3>{{ username }}<br><span>{{ role }}</span></h3>
        <ul>
            {% if session['role'] == 'Admin': %}
            <li><img src="{{url_for('static', filename='img/admin.jpg')}}" alt="edit"><a href="/admin">Admin Space</a></li>
            {% endif %}
            <li><img src="{{url_for('static', filename='img/edit.png')}}" alt="edit"><a href="/edit">Edit Profile</a></li>
            <li><img src="{{url_for('static', filename='img/help.png')}}" alt="help"><a href="/doc">Help</a></li>
            <li><img src="{{url_for('static', filename='img/log-out.png')}}" alt="logout"><a href="/logout">Logout</a></li>                    
        </ul>
    </div>
</div>
{% endblock %}

{% block list %}
<div class="list">
    <div class="box" id="heading">
        <h1 id="listTitle">{{ listTitle }}</h1> 
    </div>
    
    <div id="listParent" class="box">
        {% for item in ListItems[2:] %}
        <form action="/del" method="POST">
            <div class="item">
                {% for item in list %}
                <input id="list-check" type="checkbox" name="check" value={{ item.id }} onChange="this.form.submit()">
                <p id="list-p">{{ item.name }}</p>
                {% endfor %}
            </div>
        </form>
        {% endfor %}

        <form action="/playground" id="item" method="POST">
            <input id="newItem" type="text" name="newItem" placeholder="New Item" autocomplete="off">
            <button id="list-btn" type="submit">+</button>
        </form>
    </div>
</div>
{% endblock %}

{% block script %}
<script>    
    document.querySelector("#list-btn").addEventListener('click',()=>{
        const div = document.createElement('div'); const i =  document.createElement('input'); const para = document.createElement('p')
        i.type = 'checkbox'; i.name = 'check'; i.id = 'list-check'
        para.id = "list-p"; para.innerText = document.querySelector('#newItem').value
        div.className = 'item'; div.append(i); div.append(para)
        document.querySelector("#listParent").insertBefore(div, document.querySelector("#listParent").children[0])
    })
</script>
{% endblock %}